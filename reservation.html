<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Book Service - Bustan Al Reef</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        body { font-family: Roboto, sans-serif; margin: 0; background: #f7f7f7; }
        .container { max-width: 1000px; margin: auto; padding: 20px; }
        h1, h2, h3 { margin-bottom: 10px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; font-weight: 500; margin-bottom: 5px; }
        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            padding: 10px 15px;
            border: none;
            background: #ff6b35;
            color: #fff;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover { opacity: 0.9; }
        #map { width: 100%; height: 400px; margin-top: 15px; border-radius: 8px; }
        #locationStatus { margin-top: 10px; font-weight: 500; }
    </style>
</head>

<body>

<div class="container">
    <h1>Book Our Services</h1>

    <form>
        <h3>Service Location</h3>

        <div class="form-group">
            <label>Street Address *</label>
            <input type="text" id="streetAddress" required>
        </div>

        <button type="button" onclick="getCurrentLocation()">
            üìç Use Current Location
        </button>

        <div id="locationStatus"></div>

        <!-- Google Map -->
        <div id="map"></div>
    </form>
</div>

<!-- ================= LOCATION SCRIPT ================= -->
<script>
let map, marker;

function initMap() {
    const defaultLocation = { lat: 24.4539, lng: 54.3773 }; // Abu Dhabi

    map = new google.maps.Map(document.getElementById("map"), {
        center: defaultLocation,
        zoom: 13
    });

    marker = new google.maps.Marker({
        position: defaultLocation,
        map: map,
        draggable: true
    });

    // Drag marker
    marker.addListener("dragend", () => {
        updateAddress(marker.getPosition());
    });

    // Click map
    map.addListener("click", (e) => {
        marker.setPosition(e.latLng);
        updateAddress(e.latLng);
    });
}

function getCurrentLocation() {
    const status = document.getElementById("locationStatus");

    if (!navigator.geolocation) {
        status.innerText = "‚ùå Geolocation not supported.";
        return;
    }

    status.innerText = "üîÑ Getting your location...";

    navigator.geolocation.getCurrentPosition(
        (position) => {
            const pos = {
                lat: position.coords.latitude,
                lng: position.coords.longitude
            };

            map.setCenter(pos);
            map.setZoom(16);
            marker.setPosition(pos);

            document.getElementById("streetAddress").value =
                `Lat: ${pos.lat.toFixed(6)}, Lng: ${pos.lng.toFixed(6)}`;

            status.innerText = "‚úÖ Location detected successfully";
        },
        () => {
            status.innerText = "‚ùå Permission denied. Select location on map.";
        }
    );
}

function updateAddress(location) {
    document.getElementById("streetAddress").value =
        `Lat: ${location.lat().toFixed(6)}, Lng: ${location.lng().toFixed(6)}`;
}
</script>

<!-- ================= GOOGLE MAPS API ================= -->
<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap">
</script>

</body>
</html>
