<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Service - Bustan Al Reef Technical & Cleaning Service</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-top">
                <div class="contact-info">
                    <span><i class="fas fa-phone"></i> +971 58 512 2126</span>
                    <span><i class="fas fa-envelope"></i> info@bustan-alreef.com</span>
                    <span><i class="fas fa-map-marker-alt"></i> Abu Dhabi, UAE</span>
                </div>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
            <nav class="navbar">
                <div class="logo">
                    <a href="index.html">
                        <img src="https://via.placeholder.com/150x150/FF6B35/FFFFFF?text=Bustan+Al+Reef" alt="Bustan Al Reef Technical & Cleaning Service">
                    </a>
                </div>
                <ul class="nav-menu">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="services.html">Our Services</a></li>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="reservation.html" class="active">Book Service</a></li>
                    <li><a href="gallery.html">Projects</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="careers.html">Careers</a></li>
                </ul>
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </nav>
        </div>
    </header>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <h1>Book Our Services</h1>
            <p>Schedule professional cleaning and technical services at your convenience</p>
        </div>
    </section>

    <!-- Booking Section -->
    <section class="booking-section">
        <div class="container">
            <div class="booking-form-container">
                <div class="booking-form">
                    <h2>Service Booking</h2>
                    <form id="bookingForm">
                        <!-- Personal Information -->
                        <div class="form-section">
                            <h3>Personal Information</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="firstName">First Name *</label>
                                    <input type="text" id="firstName" name="firstName" required>
                                </div>
                                <div class="form-group">
                                    <label for="lastName">Last Name *</label>
                                    <input type="text" id="lastName" name="lastName" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="email">Email Address *</label>
                                    <input type="email" id="email" name="email" required>
                                </div>
                                <div class="form-group">
                                    <label for="phone">Phone Number *</label>
                                    <input type="tel" id="phone" name="phone" required>
                                </div>
                            </div>
                        </div>

                        <!-- Service Selection -->
                        <div class="form-section">
                            <h3>Service Details</h3>
                            <div class="form-group">
                                <label for="serviceType">Service Type *</label>
                                <select id="serviceType" name="serviceType" required>
                                    <option value="">Select a service</option>
                                    <option value="deep-cleaning">Deep Cleaning</option>
                                    <option value="regular-cleaning">Regular Cleaning</option>
                                    <option value="office-cleaning">Office Cleaning</option>
                                    <option value="carpet-cleaning">Carpet Cleaning</option>
                                    <option value="window-cleaning">Window Cleaning</option>
                                    <option value="ac-service">AC Service</option>
                                    <option value="plumbing">Plumbing</option>
                                    <option value="electrical">Electrical</option>
                                    <option value="painting">Painting</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="propertyType">Property Type *</label>
                                <select id="propertyType" name="propertyType" required>
                                    <option value="">Select property type</option>
                                    <option value="apartment">Apartment</option>
                                    <option value="villa">Villa</option>
                                    <option value="office">Office</option>
                                    <option value="retail">Retail Store</option>
                                    <option value="warehouse">Warehouse</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="propertySize">Property Size (sq ft)</label>
                                <input type="number" id="propertySize" name="propertySize" placeholder="Enter property size">
                            </div>
                            <div class="form-group">
                                <label for="specialRequests">Special Requests</label>
                                <textarea id="specialRequests" name="specialRequests" rows="3" placeholder="Any special requirements or notes..."></textarea>
                            </div>
                        </div>

                        <!-- ‚úÖ Location Information (Updated & Simplified) -->
                        <div class="form-section">
                            <h3>Service Location</h3>
                            <div class="location-section">
                                <div class="form-group">
                                    <label for="serviceArea">Service Area *</label>
                                    <select id="serviceArea" name="serviceArea" required>
                                        <option value="">Select area</option>
                                        <option value="abu-dhabi-city">Abu Dhabi City</option>
                                        <option value="khalifa-city">Khalifa City</option>
                                        <option value="al-ain">Al Ain</option>
                                        <option value="dubai">Dubai</option>
                                        <option value="sharjah">Sharjah</option>
                                        <option value="ajman">Ajman</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="streetAddress">Street Address *</label>
                                    <input type="text" id="streetAddress" name="streetAddress" required>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="buildingNumber">Building/Villa Number *</label>
                                        <input type="text" id="buildingNumber" name="buildingNumber" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="landmark">Nearest Landmark</label>
                                        <input type="text" id="landmark" name="landmark" placeholder="e.g., Mall, School, Park">
                                    </div>
                                </div>
                                <div class="location-actions">
                                    <button type="button" class="btn-primary" onclick="getCurrentLocation()">
                                        <i class="fas fa-location-dot"></i> Use Current Location
                                    </button>
                                </div>
                                <div id="locationStatus" style="margin-top: 10px;"></div>
                                <div id="locationResult" style="margin-top: 10px;"></div>
                            </div>
                        </div>

                        <!-- Booking Schedule -->
                        <div class="form-section">
                            <h3>Preferred Schedule</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="bookingDate">Preferred Date *</label>
                                    <input type="date" id="bookingDate" name="bookingDate" required>
                                </div>
                                <div class="form-group">
                                    <label for="bookingTime">Preferred Time *</label>
                                    <select id="bookingTime" name="bookingTime" required>
                                        <option value="">Select time</option>
                                        <option value="08:00">8:00 AM</option>
                                        <option value="09:00">9:00 AM</option>
                                        <option value="10:00">10:00 AM</option>
                                        <option value="11:00">11:00 AM</option>
                                        <option value="12:00">12:00 PM</option>
                                        <option value="13:00">1:00 PM</option>
                                        <option value="14:00">2:00 PM</option>
                                        <option value="15:00">3:00 PM</option>
                                        <option value="16:00">4:00 PM</option>
                                        <option value="17:00">5:00 PM</option>
                                        <option value="18:00">6:00 PM</option>
                                        <option value="19:00">7:00 PM</option>
                                        <option value="20:00">8:00 PM</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="urgency">Service Urgency</label>
                                <select id="urgency" name="urgency">
                                    <option value="regular">Regular (3-5 days)</option>
                                    <option value="priority">Priority (1-2 days)</option>
                                    <option value="emergency">Emergency (Same day)</option>
                                </select>
                            </div>
                        </div>

                        <!-- Additional Options -->
                        <div class="form-section">
                            <h3>Additional Options</h3>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="ecoFriendly" name="ecoFriendly">
                                    <span class="checkmark"></span>
                                    Use eco-friendly products (+10%)
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="afterHours" name="afterHours">
                                    <span class="checkmark"></span>
                                    After-hours service (+20%)
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="recurring" name="recurring">
                                    <span class="checkmark"></span>
                                    Make this a recurring service
                                </label>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <div class="form-actions">
                            <button type="submit" class="btn-primary">Book Service</button>
                            <button type="button" class="btn-secondary" onclick="resetForm()">Clear Form</button>
                        </div>
                    </form>
                </div>

                <!-- Booking Summary -->
                <div class="booking-summary">
                    <h3>Booking Summary</h3>
                    <div id="summaryContent">
                        <p class="empty-summary">Fill in the form to see your booking summary</p>
                    </div>
                    <div class="summary-total" id="summaryTotal" style="display: none;">
                        <h4>Estimated Cost</h4>
                        <div class="total-amount">
                            <span class="currency">AED</span>
                            <span id="totalAmount">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer and CTA sections remain unchanged -->
    <footer class="footer">...</footer>

    <!-- JS Scripts -->
    <script src="script.js"></script>
    <script>
        // ------------------- SERVICE PRICES -------------------
        const servicePrices = {
            'deep-cleaning': 299,
            'regular-cleaning': 149,
            'office-cleaning': 199,
            'carpet-cleaning': 149,
            'window-cleaning': 99,
            'ac-service': 199,
            'plumbing': 249,
            'electrical': 299,
            'painting': 399,
            'other': 199
        };

        // ------------------- AUTO-LOAD LOCATION -------------------
        window.addEventListener('load', function() {
            // Show location options automatically after page load
            setTimeout(function() {
                showManualLocationOption();
            }, 1000);
        });

        // ------------------- LOCATION FUNCTIONS -------------------
        function getCurrentLocation() {
            const locationStatus = document.getElementById('locationStatus');
            const locationResult = document.getElementById('locationResult');
            
            // Debug: Show function was called
            console.log('getCurrentLocation function called');
            
            if (!navigator.geolocation) {
                console.log('Geolocation not supported');
                showManualLocationOption();
                return;
            }
            
            locationStatus.innerHTML = '<div class="loading">üîÑ Getting your location...</div>';
            locationStatus.style.display = 'block';
            locationResult.style.display = 'none';
            
            // Use high accuracy and timeout
            const options = {
                enableHighAccuracy: true,
                timeout: 10000,
                maximumAge: 0
            };
            
            console.log('Requesting geolocation with options:', options);
            
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    console.log('Position received:', position);
                    const { latitude, longitude } = position.coords;
                    
                    locationStatus.innerHTML = '<div class="loading">üìç Detecting your emirate...</div>';
                    
                    // Simple UAE emirate detection
                    const uaeEmirates = [
                        { name: 'abu dhabi', lat: 24.4539, lon: 54.3773, display: 'Abu Dhabi' },
                        { name: 'dubai', lat: 25.2048, lon: 55.2708, display: 'Dubai' },
                        { name: 'sharjah', lat: 25.3575, lon: 55.4032, display: 'Sharjah' },
                        { name: 'ajman', lat: 25.4052, lon: 55.5136, display: 'Ajman' },
                        { name: 'umm al quwain', lat: 25.5647, lon: 55.5552, display: 'Umm Al Quwain' },
                        { name: 'ras al khaimah', lat: 25.7895, lon: 55.9432, display: 'Ras Al Khaimah' },
                        { name: 'fujairah', lat: 25.1288, lon: 56.3265, display: 'Fujairah' }
                    ];
                    
                    // Find nearest emirate
                    let nearestEmirate = uaeEmirates[0];
                    let minDistance = Infinity;
                    
                    uaeEmirates.forEach(emirate => {
                        const distance = Math.sqrt(
                            Math.pow(latitude - emirate.lat, 2) + 
                            Math.pow(longitude - emirate.lon, 2)
                        );
                        if (distance < minDistance) {
                            minDistance = distance;
                            nearestEmirate = emirate;
                        }
                    });
                    
                    console.log('Nearest emirate detected:', nearestEmirate);
                    
                    // Auto-select detected emirate in main form
                    const emirateSelect = document.getElementById('serviceArea');
                    for (let i = 0; i < emirateSelect.options.length; i++) {
                        if (emirateSelect.options[i].value.toLowerCase().includes(nearestEmirate.name.replace(' ', '-'))) {
                            emirateSelect.selectedIndex = i;
                            break;
                        }
                    }
                    
                    // Fill sample address
                    const sampleAddresses = {
                        'abu dhabi': 'Khalifa Street',
                        'dubai': 'Sheikh Zayed Road',
                        'sharjah': 'Al Wahda Street',
                        'ajman': 'Sheikh Khalifa Street',
                        'umm al quwain': 'Al Salam Street',
                        'ras al khaimah': 'Al Qasimi Street',
                        'fujairah': 'Sheikh Khalifa Street'
                    };
                    
                    document.getElementById('streetAddress').value = sampleAddresses[nearestEmirate.name] || '';
                    document.getElementById('buildingNumber').value = '123';
                    document.getElementById('landmark').value = 'Near City Center';
                    
                    locationStatus.innerHTML = '<div class="success">‚úÖ Location found!</div>';
                    locationResult.innerHTML = `
                        <div class="location-info">
                            <strong>üìç Your Emirate:</strong> ${nearestEmirate.display}<br>
                            <strong>üè† Address:</strong> ${sampleAddresses[nearestEmirate.name]}<br>
                            <strong>üìç GPS:</strong> ${latitude.toFixed(4)}, ${longitude.toFixed(4)}<br>
                            <small>‚ú® Address filled! Please review and edit if needed.</small>
                        </div>
                    `;
                    locationResult.style.display = 'block';
                    updateBookingSummary();
                },
                (error) => {
                    console.log('Geolocation error:', error);
                    // If any error, show manual selection
                    showManualLocationOption();
                },
                options
            );
        }

        function showLocationPermissionHelp() {
            // Skip permission help and go directly to manual selection
            showManualLocationOption();
        }

        function showManualLocationOption() {
            const locationStatus = document.getElementById('locationStatus');
            const locationResult = document.getElementById('locationResult');
            
            locationStatus.innerHTML = '<div class="info">üìç Select your location for service:</div>';
            locationStatus.style.display = 'block';
            
            locationResult.innerHTML = `
                <div class="location-info">
                    <div style="margin-bottom: 15px;">
                        <button type="button" class="btn-primary" onclick="getCurrentLocation()" style="width: 100%; margin-bottom: 10px;">
                            üìç Use My Current Location
                        </button>
                        <button type="button" class="btn-secondary" onclick="openGoogleMaps()" style="width: 100%; margin-bottom: 10px;">
                            üó∫Ô∏è Select on Map
                        </button>
                        <div style="text-align: center; margin: 10px 0; color: #666;">OR</div>
                        <label style="display: block; margin-bottom: 5px; font-weight: 500;">Choose Your Area:</label>
                        <select id="manualEmirate" onchange="fillManualAddress()" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                            <option value="">-- Select Your Area --</option>
                            <option value="abu-dhabi-city">Abu Dhabi City</option>
                            <option value="khalifa-city">Khalifa City</option>
                            <option value="al-ain">Al Ain</option>
                            <option value="dubai">Dubai</option>
                            <option value="sharjah">Sharjah</option>
                            <option value="ajman">Ajman</option>
                        </select>
                    </div>
                    <div id="manualAddressResult"></div>
                    <div id="mapContainer" style="display: none; margin-top: 15px;">
                        <div style="margin-bottom: 10px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: 500;">üó∫Ô∏è Click on map to select your location:</label>
                            <div id="map" style="height: 300px; width: 100%; border: 1px solid #ddd; border-radius: 4px; background: #f0f0f0;"></div>
                        </div>
                        <div style="text-align: center;">
                            <button type="button" class="btn-primary" onclick="confirmMapLocation()" style="margin: 5px;">
                                ‚úÖ Use This Location
                            </button>
                            <button type="button" class="btn-secondary" onclick="closeMap()" style="margin: 5px;">
                                ‚ùå Cancel
                            </button>
                        </div>
                    </div>
                </div>
            `;
            locationResult.style.display = 'block';
        }

        function fillManualAddress() {
            const emirate = document.getElementById('manualEmirate').value;
            const resultDiv = document.getElementById('manualAddressResult');
            
            if (!emirate) {
                resultDiv.innerHTML = '';
                return;
            }
            
            // Auto-select emirate in main form
            const emirateSelect = document.getElementById('serviceArea');
            for (let i = 0; i < emirateSelect.options.length; i++) {
                if (emirateSelect.options[i].value === emirate) {
                    emirateSelect.selectedIndex = i;
                    break;
                }
            }
            
            // Fill sample address
            const sampleAddresses = {
                'abu-dhabi-city': 'Khalifa Street',
                'khalifa-city': 'Khalifa City Street',
                'al-ain': 'Al Ain City Center',
                'dubai': 'Sheikh Zayed Road',
                'sharjah': 'Al Wahda Street',
                'ajman': 'Sheikh Khalifa Street'
            };
            
            document.getElementById('streetAddress').value = sampleAddresses[emirate] || '';
            document.getElementById('buildingNumber').value = '123';
            document.getElementById('landmark').value = 'Near City Center';
            
            resultDiv.innerHTML = `
                <div style="margin-top: 10px; padding: 10px; background: #e8f5e8; border-radius: 4px;">
                    <strong>‚úÖ Address filled for ${emirate.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())}</strong><br>
                    <small>üìç ${sampleAddresses[emirate]}, Building 123</small><br>
                    <small>Please review and edit if needed.</small>
                </div>
            `;
            
            updateBookingSummary();
        }

        function openGoogleMaps() {
            const locationStatus = document.getElementById('locationStatus');
            const locationResult = document.getElementById('locationResult');
            const mapContainer = document.getElementById('mapContainer');
            
            locationStatus.innerHTML = '<div class="info">üó∫Ô∏è Opening map selector...</div>';
            locationStatus.style.display = 'block';
            mapContainer.style.display = 'block';
            
            // Simple map interface without API key
            const mapDiv = document.getElementById('map');
            mapDiv.innerHTML = `
                <div style="text-align: center; padding: 20px; background: #f0f0f0; border-radius: 4px;">
                    <h4 style="color: #333; margin-bottom: 15px;">üó∫Ô∏è Select Your Location</h4>
                    <p style="color: #666; margin-bottom: 20px;">Click on map below to select your exact location</p>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin-bottom: 20px;">
                        <button type="button" onclick="selectMapLocation('abu-dhabi-city', 'Khalifa Street', 24.4539, 54.3773)" style="padding: 10px; background: #FF6B35; color: white; border: none; border-radius: 4px; cursor: pointer;">
                            üèõÔ∏è Abu Dhabi
                        </button>
                        <button type="button" onclick="selectMapLocation('dubai', 'Sheikh Zayed Road', 25.2048, 55.2708)" style="padding: 10px; background: #FF6B35; color: white; border: none; border-radius: 4px; cursor: pointer;">
                            üèôÔ∏è Dubai
                        </button>
                        <button type="button" onclick="selectMapLocation('sharjah', 'Al Wahda Street', 25.3575, 55.4032)" style="padding: 10px; background: #FF6B35; color: white; border: none; border-radius: 4px; cursor: pointer;">
                            üïåÔ∏è Sharjah
                        </button>
                        <button type="button" onclick="selectMapLocation('ajman', 'Sheikh Khalifa Street', 25.4052, 55.5136)" style="padding: 10px; background: #FF6B35; color: white; border: none; border-radius: 4px; cursor: pointer;">
                            üèñÔ∏è Ajman
                        </button>
                        <button type="button" onclick="selectMapLocation('khalifa-city', 'Khalifa City Street', 24.4833, 54.3633)" style="padding: 10px; background: #FF6B35; color: white; border: none; border-radius: 4px; cursor: pointer;">
                            üèùÔ∏è Khalifa City
                        </button>
                        <button type="button" onclick="selectMapLocation('al-ain', 'Al Ain City Center', 24.2333, 55.7333)" style="padding: 10px; background: #FF6B35; color: white; border: none; border-radius: 4px; cursor: pointer;">
                            üèûÔ∏è Al Ain
                        </button>
                    </div>
                    <p style="color: #666; font-size: 14px;">üí° Click any emirate to auto-fill your location details</p>
                </div>
            `;
        }

        function selectMapLocation(emirate, street, lat, lng) {
            // Fill form fields
            document.getElementById('streetAddress').value = street;
            document.getElementById('buildingNumber').value = '123';
            document.getElementById('landmark').value = 'Selected on map';
            
            // Select emirate in dropdown
            const emirateSelect = document.getElementById('serviceArea');
            for (let i = 0; i < emirateSelect.options.length; i++) {
                if (emirateSelect.options[i].value === emirate) {
                    emirateSelect.selectedIndex = i;
                    break;
                }
            }
            
            // Update status
            const locationStatus = document.getElementById('locationStatus');
            const locationResult = document.getElementById('locationResult');
            
            locationStatus.innerHTML = '<div class="success">‚úÖ Location selected!</div>';
            locationResult.innerHTML = `
                <div class="location-info">
                    <strong>üìç Selected Area:</strong> ${emirate.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())}<br>
                    <strong>üè† Address:</strong> ${street}<br>
                    <strong>üìç Coordinates:</strong> ${lat.toFixed(4)}, ${lng.toFixed(4)}<br>
                    <small>‚ú® Address fields filled! Please review and edit if needed.</small>
                </div>
            `;
            
            // Close map
            closeMap();
            updateBookingSummary();
        }

        function confirmMapLocation() {
            alert('Please select an emirate from the map options above.');
        }

        function closeMap() {
            const mapContainer = document.getElementById('mapContainer');
            mapContainer.style.display = 'none';
            showManualLocationOption();
        }

        // ------------------- BOOKING SUMMARY FUNCTIONS -------------------
        function updateBookingSummary() {
            const summaryContent = document.getElementById('summaryContent');
            const summaryTotal = document.getElementById('summaryTotal');
            const totalAmount = document.getElementById('totalAmount');
            
            // Get form values
            const serviceType = document.getElementById('serviceType').value;
            const propertyType = document.getElementById('propertyType').value;
            const propertySize = document.getElementById('propertySize').value;
            const bookingDate = document.getElementById('bookingDate').value;
            const bookingTime = document.getElementById('bookingTime').value;
            const urgency = document.getElementById('urgency').value;
            const streetAddress = document.getElementById('streetAddress').value;
            const ecoFriendly = document.getElementById('ecoFriendly').checked;
            const afterHours = document.getElementById('afterHours').checked;
            const recurring = document.getElementById('recurring').checked;
            
            if (!serviceType || !propertyType || !bookingDate || !bookingTime || !streetAddress) {
                summaryContent.innerHTML = '<p class="empty-summary">Fill in all required fields to see your booking summary</p>';
                summaryTotal.style.display = 'none';
                return;
            }
            
            // Calculate base price
            let basePrice = servicePrices[serviceType] || 199;
            
            // Add additional charges
            let additionalCharges = 0;
            if (ecoFriendly) additionalCharges += basePrice * 0.10;
            if (afterHours) additionalCharges += basePrice * 0.20;
            
            let totalPrice = basePrice + additionalCharges;
            
            // Display summary
            summaryContent.innerHTML = `
                <div class="summary-item">
                    <span class="summary-label">Service:</span>
                    <span class="summary-value">${serviceType.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())}</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Property:</span>
                    <span class="summary-value">${propertyType.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())}</span>
                </div>
                ${propertySize ? `
                <div class="summary-item">
                    <span class="summary-label">Size:</span>
                    <span class="summary-value">${propertySize} sq ft</span>
                </div>` : ''}
                <div class="summary-item">
                    <span class="summary-label">Date:</span>
                    <span class="summary-value">${new Date(bookingDate).toLocaleDateString()}</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Time:</span>
                    <span class="summary-value">${bookingTime}</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Urgency:</span>
                    <span class="summary-value">${urgency.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())}</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Address:</span>
                    <span class="summary-value">${streetAddress}</span>
                </div>
                ${ecoFriendly ? `
                <div class="summary-item">
                    <span class="summary-label">Eco-Friendly:</span>
                    <span class="summary-value">+10%</span>
                </div>` : ''}
                ${afterHours ? `
                <div class="summary-item">
                    <span class="summary-label">After Hours:</span>
                    <span class="summary-value">+20%</span>
                </div>` : ''}
                ${recurring ? `
                <div class="summary-item">
                    <span class="summary-label">Service Type:</span>
                    <span class="summary-value">Recurring</span>
                </div>` : ''}
            `;
            
            totalAmount.textContent = Math.round(totalPrice);
            summaryTotal.style.display = 'block';
        }

        function resetForm() {
            document.getElementById('bookingForm').reset();
            document.getElementById('summaryContent').innerHTML = '<p class="empty-summary">Fill in form to see your booking summary</p>';
            document.getElementById('summaryTotal').style.display = 'none';
            document.getElementById('locationStatus').innerHTML = '';
            document.getElementById('locationResult').innerHTML = '';
        }

        // ------------------- EVENT LISTENERS -------------------
        document.addEventListener('DOMContentLoaded', function() {
            // Form submission
            document.getElementById('bookingForm').addEventListener('submit', function(e) {
                e.preventDefault();
                alert('Thank you for your booking! We will contact you shortly to confirm your appointment.');
                resetForm();
            });
            
            // Update booking summary on form changes
            document.getElementById('serviceType').addEventListener('change', updateBookingSummary);
            document.getElementById('propertyType').addEventListener('change', updateBookingSummary);
            document.getElementById('propertySize').addEventListener('input', updateBookingSummary);
            document.getElementById('bookingDate').addEventListener('change', updateBookingSummary);
            document.getElementById('bookingTime').addEventListener('change', updateBookingSummary);
            document.getElementById('urgency').addEventListener('change', updateBookingSummary);
            document.getElementById('streetAddress').addEventListener('input', updateBookingSummary);
            document.getElementById('ecoFriendly').addEventListener('change', updateBookingSummary);
            document.getElementById('afterHours').addEventListener('change', updateBookingSummary);
            
            // Set minimum date to today
            document.getElementById('bookingDate').min = new Date().toISOString().split('T')[0];
        });
    </script>
</body>
</html>
